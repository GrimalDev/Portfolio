function imageDropHandler(file){const imageInputEl=document.getElementById("project-image__input");const dataTransfer=new DataTransfer;dataTransfer.items.add(file);imageInputEl.files=dataTransfer.files;const imageDropEl=document.getElementById("project-image__drop-zone");imageDropEl.style.backgroundImage=`url(${URL.createObjectURL(file)})`;imageDropEl.innerHTML=file.name}function moreFilesDropHandler(files){const filesInputEl=document.getElementById("project-html-optional__input");const dataTransfer=new DataTransfer;for(let i=0;i<files.length;i++){dataTransfer.items.add(files[i])}filesInputEl.files=dataTransfer.files;const filesDropEl=document.getElementById("project-html-optional__drop-zone");filesDropEl.innerHTML="";for(let i=0;i<files.length;i++){const fileEl=document.createElement("span");fileEl.classList.add("file-list");fileEl.innerHTML=files[i].name;filesDropEl.appendChild(fileEl)}}function pdfDropHandler(file){const imageInputEl=document.getElementById("project-pdf__input");const dataTransfer=new DataTransfer;dataTransfer.items.add(file);imageInputEl.files=dataTransfer.files;const imageDropEl=document.getElementById("project-pdf__drop-zone");imageDropEl.style.backgroundImage=`url(${URL.createObjectURL(file)})`;imageDropEl.innerHTML=file.name}function imageDropInit(){const imageDropEl=document.getElementById("project-image__drop-zone");const imageInputEl=document.getElementById("project-image__input");imageDropEl.addEventListener("dragover",e=>{e.preventDefault();imageDropEl.classList.add("active");setTimeout(()=>{imageDropEl.classList.remove("active")},2e3)});imageDropEl.addEventListener("dragenter",e=>{e.preventDefault()});imageDropEl.addEventListener("dragleave",e=>{e.preventDefault()});imageDropEl.addEventListener("drop",e=>{e.preventDefault();imageDropHandler(e.dataTransfer.files[0])});imageDropEl.addEventListener("click",e=>{imageInputEl.click()});imageInputEl.addEventListener("change",e=>{e.preventDefault();imageDropHandler(e.target.files[0])})}function moreFilesInit(){const filesDropEl=document.getElementById("project-html-optional__drop-zone");const filesInputEl=document.getElementById("project-html-optional__input");filesDropEl.addEventListener("dragover",e=>{e.preventDefault();filesDropEl.classList.add("active");setTimeout(()=>{filesDropEl.classList.remove("active")},2e3)});filesDropEl.addEventListener("dragenter",e=>{e.preventDefault()});filesDropEl.addEventListener("dragleave",e=>{e.preventDefault()});filesDropEl.addEventListener("drop",e=>{e.preventDefault();imageDropHandler(e.dataTransfer.files[0])});filesDropEl.addEventListener("click",e=>{filesInputEl.click()});filesInputEl.addEventListener("change",e=>{e.preventDefault();moreFilesDropHandler(e.target.files)})}function pdfDropInit(){const pdfDropEl=document.getElementById("project-pdf__drop-zone");const pdfInputEl=document.getElementById("project-pdf__input");pdfDropEl.addEventListener("dragover",e=>{e.preventDefault();pdfDropEl.classList.add("active");setTimeout(()=>{pdfDropEl.classList.remove("active")},2e3)});pdfDropEl.addEventListener("dragenter",e=>{e.preventDefault()});pdfDropEl.addEventListener("dragleave",e=>{e.preventDefault()});pdfDropEl.addEventListener("drop",e=>{e.preventDefault();pdfDropHandler(e.dataTransfer.files[0])});pdfDropEl.addEventListener("click",e=>{pdfInputEl.click()});pdfInputEl.addEventListener("change",e=>{e.preventDefault();pdfDropHandler(e.target.files[0])})}function addProjectHandler(){const formData=new FormData(document.getElementById("add-project__form"));fetch("/projects/add",{method:"POST",body:formData}).then(async res=>{const form=document.getElementById("add-project__form");const response=await res.json();console.log(response);if(response.status==="ok"){form.classList.add("validated");setTimeout(()=>{form.classList.remove("validated")},2e3);return}const errorEl=document.getElementById("add-project__error");errorEl.innerHTML=response.message;setTimeout(()=>{errorEl.innerHTML=""},5e3);form.classList.add("invalid");setTimeout(()=>{form.classList.remove("invalid")},2e3)}).catch(err=>{const form=document.getElementById("add-project__form");form.classList.add("invalid");setTimeout(()=>{form.classList.remove("invalid")},2e3)})}function addProjectInit(){document.getElementById("add-project__form").addEventListener("submit",e=>{e.preventDefault();addProjectHandler()});document.getElementById("add-project__form__reset").addEventListener("click",newProjectResetHandler)}function newProjectResetHandler(){const dropZones=document.getElementsByClassName("drop-zone");for(let i=0;i<dropZones.length;i++){dropZones[i].style.backgroundImage=""}const imageDropEl=document.getElementById("project-image__drop-zone");imageDropEl.innerHTML="Image du projet<br>Drop ou click pour ajouter une image";const filesDropEl=document.getElementById("project-html-optional__drop-zone");filesDropEl.innerHTML="Html article (optionnel)<br>Format zip<br>Drop ou click pour ajouter des fichier";const pdfDropEl=document.getElementById("project-pdf__drop-zone");pdfDropEl.innerHTML="Fichier pour téléchargement (si nécessaire)<br>En pdf !"}const init=async()=>{imageDropInit();moreFilesInit();pdfDropInit();addProjectInit()};window.onload=init;