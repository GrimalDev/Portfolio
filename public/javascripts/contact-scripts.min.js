const textArea=document.getElementById("message");const textIndexContainer=document.getElementById("message__char-count");const textIndex=document.getElementById("message__char-count__index");const statusMessage=document.getElementById("contact__form__status-message");textArea.addEventListener("input",function(){textIndex.innerText=textArea.value.length;const max=parseInt(textIndexContainer.innerText.split("/")[1].trim());const red=Math.floor(textArea.value.length/max*255);const green=255-red;textIndex.style.color=`rgb(${red}, ${green}, 0)`;if(textArea.value.length>max){textArea.value=textArea.value.substring(0,max);textArea.classList.toggle("status-bad")}else{textArea.classList.toggle("status-bad",false)}});const form=document.getElementById("contact__form");form.addEventListener("submit",async function(e){e.preventDefault();statusMessage.classList.toggle("hidden",true);statusMessage.classList.toggle("status-good",false);const inputs=document.getElementsByClassName("form__input");let allFilled=true;Object.values(inputs).forEach(input=>{input.classList.toggle("status-bad",false);if(!input.value){input.classList.toggle("status-bad");allFilled=false}});if(!allFilled){return}const formData=new URLSearchParams(new FormData(form));const response=await fetch(form.action,{method:"POST",body:formData});const responseJson=await response.json();if(responseJson.status==="nook"){statusMessage.innerText=responseJson.message;statusMessage.classList.toggle("hidden");return}statusMessage.classList.toggle("status-good",true);statusMessage.innerText="Message sent successfully!";statusMessage.classList.toggle("hidden")});